<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>ctyunw-Moumoutang.GitHub.io by moumoutang</title>

    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
</head>

<body>
<textarea id="source">
---
>实现一个LazyMan，可以按照以下方式调用:
    LazyMan(“Hank”)输出:
    Hi! This is Hank!
    LazyMan(“Hank”).sleep(10).eat(“dinner”)输出
    Hi! This is Hank!
    //等待10秒..
    Wake up after 10
    Eat dinner~
    LazyMan(“Hank”).eat(“dinner”).eat(“supper”)输出
    Hi This is Hank!
    Eat dinner~
    Eat supper~
    LazyMan(“Hank”).sleepFirst(5).eat(“supper”)输出
    //等待5秒
    Wake up after 5
    Hi This is Hank!
    Eat supper

---

``` javascript
function lazyMan(name){
     var step = [];
     var lazy = function(name){
        console.log("hi," + name)
      this.next();
      setTimeout(() => {
          this.next();
      });
     }
     lazy.prototype.sleep = function(num){
         var me = this;
         step[step.length] = function(){
            setTimeout(function(){
            console.log("sleep for " + num + "second")
            me.next();
          },num * 1000)
         }  
         return this;
     }
     lazy.prototype.eat = function(food){
        var me = this;
        step[step.length] = function(){
                console.log(food)
            me.next();
        }  
        return this;
     }
     lazy.prototype.next = function(){
       if(!step.length)return;
       var task = step.shift();
            task && task();
        console.log(step)
     }
        return new lazy(name);
}
``` 
---
promise实现sleepFirst还有待思考 
---
``` javascript
function lazyMan(name){
     
     var lazy = function(name){
        this.promise = new Promise((fullfill,reject) => {
            console.log("hello," + name);
            fullfill();
        })
     }
     lazy.prototype.eat = function(num){
        var me = this;
        this.promise.then(()=>{
           console.log(num)
        })
        return this;
     }
     lazy.prototype.sleep = function(food){
        var me = this;
        this.promise.then(() => {
          return new Promise((fullfill,reject) => {
            setTimeout(()=>{
              console.log("sleep" + food);
              fullfill();
            },food * 1000)
          })
        })
        return this;
     }

      return new lazy(name);
}
``` 
---
</textarea>

<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>
      var slideshow = remark.create();
    </script>
</body>